workflows:
  - name: download
    help: "Download the MNIST dataset"
    provider: bash
    python: 3.10
    env:
      - PYTHONPATH=mnist
    commands:
      - pip install -r requirements.txt
      - python mnist/download.py
    artifacts:
      - path: data

  - name: train
    help: "Train a MNIST model"
    deps:
      - tag: mnist_data
    provider: bash
    requirements: "requirements.txt"
    env:
      - PYTHONPATH=mnist
    commands:
      - pip install -r requirements.txt
      - python mnist/train.py
    artifacts:
      - path: lightning_logs