workflows:
  - name: mnist-download
    help: "This workflow downloads the MNIST dataset"
    provider: bash
    commands:
      - pip install -r mnist/requirements.txt
      - python mnist/download.py
    artifacts:
      - path: ./mnist/data

  - name: mnist-train
    help: "This workflow trains a MNIST model using the dataset from the `mnist-download` workflow.
           Before running it, run the `mnist-download` workflow and add the `mnist-data` tag to it."
    deps:
      - tag: mnist-data
    provider: bash
    commands:
      - pip install -r mnist/requirements.txt
      - python mnist/train.py
    artifacts:
      - path: ./lightning_logs